apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: pihole
  namespace: argocd
spec:
  destination:
    namespace: pihole
    server: https://kubernetes.default.svc
  project: default
  source:
    helm:
      values: |-
        persistentVolumeClaim:
          # set to true to use pvc
          enabled: true # Change to true
          # set to true to use you own pvc
          existingClaim: "pihole" # Name of the persistent volume claim

        extraEnvVars:
          TZ: "Asia/Singapore" # Timezone

        DNS1: "192.168.10.1"

        admin:
          # -- Specify an existing secret to use as admin password
          existingSecret: "pihole-credentials"
          # -- Specify the key inside the secret to use
          passwordKey: "WEBPASSWORD"

        serviceWeb:
          loadBalancerIP: 192.168.10.192
          annotations:
            metallb.universe.tf/allow-shared-ip: home-net-pool
          type: LoadBalancer

        serviceDns:
          loadBalancerIP: 192.168.10.192
          annotations:
            metallb.universe.tf/allow-shared-ip: home-net-pool
          type: LoadBalancer

        serviceDhcp:
          enabled: false
    path: charts/pihole
    repoURL: https://github.com/MoJo2600/pihole-kubernetes
    targetRevision: pihole-2.11.1